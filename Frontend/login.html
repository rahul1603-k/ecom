<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Login - E-Shop</title>
  <script src="config.js"></script>
  <style>
*{margin:0;padding:0;box-sizing:border-box;font-family:'Segoe UI',Tahoma,Geneva,Verdana,sans-serif}

body{
  background:linear-gradient(135deg,#667eea 0%,#764ba2 100%);
  min-height:100vh;
  display:flex;
  align-items:center;
  justify-content:center;
  animation:fadeInBg .8s ease-out;
}

@keyframes fadeInBg{
  from{opacity:0}
  to{opacity:1}
}

.container{
  background:white;
  border-radius:20px;
  box-shadow:0 20px 60px rgba(0,0,0,.3);
  overflow:hidden;
  display:flex;
  max-width:900px;
  animation:slideUp .6s ease-out;
}

@keyframes slideUp{
  from{opacity:0;transform:translateY(50px)}
  to{opacity:1;transform:translateY(0)}
}

.left{
  background:linear-gradient(135deg,#667eea 0%,#764ba2 100%);
  color:white;
  padding:60px 40px;
  display:flex;
  flex-direction:column;
  justify-content:center;
  align-items:center;
  width:40%;
  animation:slideInLeft .8s ease-out;
}

@keyframes slideInLeft{
  from{opacity:0;transform:translateX(-100px)}
  to{opacity:1;transform:translateX(0)}
}

.left h1{
  font-size:40px;
  margin-bottom:20px;
  animation:fadeInDown .8s ease-out .2s both;
}

.left p{
  font-size:16px;
  line-height:1.8;
  animation:fadeInUp .8s ease-out .4s both;
}

.right{
  padding:60px 50px;
  width:60%;
  display:flex;
  flex-direction:column;
  justify-content:center;
  animation:slideInRight .8s ease-out;
}

@keyframes slideInRight{
  from{opacity:0;transform:translateX(100px)}
  to{opacity:1;transform:translateX(0)}
}

.right h2{
  font-size:32px;
  color:#333;
  margin-bottom:10px;
  animation:fadeInDown .8s ease-out .2s both;
}

.right p{
  color:#888;
  margin-bottom:30px;
  animation:fadeInUp .8s ease-out .3s both;
}

.form-group{
  margin-bottom:20px;
  animation:fadeInUp .6s ease-out backwards;
}

.form-group:nth-child(3){animation-delay:.4s}
.form-group:nth-child(4){animation-delay:.5s}
.form-group:nth-child(5){animation-delay:.6s}

label{
  display:block;
  margin-bottom:8px;
  color:#333;
  font-weight:600;
  font-size:14px;
}

input{
  width:100%;
  padding:14px 16px;
  border:2px solid #e0e0e0;
  border-radius:10px;
  font-size:15px;
  transition:all .3s;
  background:#f9f9f9;
}

input:focus{
  outline:none;
  border-color:#667eea;
  background:white;
  box-shadow:0 0 0 3px rgba(102,126,234,.1);
  transform:scale(1.02);
}

.btn{
  width:100%;
  padding:14px;
  background:linear-gradient(135deg,#667eea 0%,#764ba2 100%);
  color:white;
  border:none;
  border-radius:10px;
  font-size:16px;
  font-weight:600;
  cursor:pointer;
  transition:all .3s;
  position:relative;
  overflow:hidden;
  animation:fadeInUp .6s ease-out .7s both;
  margin-top:20px;
}

.btn::before{
  content:'';
  position:absolute;
  top:50%;
  left:50%;
  width:0;
  height:0;
  background:rgba(255,255,255,.2);
  border-radius:50%;
  transform:translate(-50%,-50%);
  transition:.6s;
}

.btn:hover{
  transform:translateY(-3px);
  box-shadow:0 10px 30px rgba(102,126,234,.3);
}

.btn:active::before{
  width:300px;
  height:300px;
}

.footer-text{
  text-align:center;
  margin-top:30px;
  color:#888;
  font-size:14px;
  animation:fadeInUp .6s ease-out .8s both;
}

.footer-text a{
  color:#667eea;
  text-decoration:none;
  font-weight:600;
  transition:.2s;
  cursor:pointer;
}

.footer-text a:hover{
  color:#764ba2;
  text-decoration:underline;
}

.error{
  color:#e74c3c;
  font-size:13px;
  margin-top:5px;
  animation:shake .3s ease-out;
}

@keyframes shake{
  0%,100%{transform:translateX(0)}
  25%{transform:translateX(-5px)}
  75%{transform:translateX(5px)}
}

@media(max-width:768px){
  .container{
    flex-direction:column;
    width:90%;
  }
  .left,.right{
    width:100%;
    padding:40px;
  }
  .left{
    order:2;
  }
  .right{
    order:1;
  }
}
  </style>
</head>
<body>

<div class="container">
  <div class="left">
    <h1>üõçÔ∏è</h1>
    <h1>E-Shop</h1>
    <p>Welcome back! Sign in to access your personalized shopping experience and track your orders.</p>
  </div>

  <div class="right">
    <h2>Login</h2>
    <p>Enter your details to continue shopping</p>

    <form id="loginForm">
      <div class="form-group">
        <label for="email">Email Address</label>
        <input type="email" id="email" placeholder="you@example.com" required>
        <div id="emailError" class="error"></div>
      </div>

      <div class="form-group">
        <label for="password">Password</label>
        <input type="password" id="password" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢" required>
        <div id="passwordError" class="error"></div>
      </div>

      <button type="submit" class="btn">Sign In</button>
    </form>

    <div class="footer-text">
      Don't have an account? <a onclick="window.location.href='signup.html'">Sign Up</a>
    </div>
  </div>
</div>

<script>
const API_URL = window.APP_CONFIG.API_URL;

document.getElementById('loginForm').addEventListener('submit', async (e) => {
  e.preventDefault();

  const email = document.getElementById('email').value;
  const password = document.getElementById('password').value;

  try {
    const response = await fetch(`${API_URL}/users/login`, {
      method: 'POST',
      headers: {
        'Content-Type': 'application/json'
      },
      body: JSON.stringify({ email, password })
    });

    const data = await response.json();

    if (!response.ok) {
      alert('‚ùå ' + (data.error || data.message || 'Login failed'));
      return;
    }

    // Save token and user
    localStorage.setItem('token', data.token);
    localStorage.setItem('user', JSON.stringify(data.user));

    alert('‚úì Login successful!');
    window.location.href = 'index.html';
  } catch (error) {
    console.error('Login error:', error);
    alert('‚ùå Connection error: ' + error.message);
  }
});
</script>

</body>
</html>
